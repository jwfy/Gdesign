<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>DMovie | 找回密码</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <link href="/static/css/theme.min.css" rel="stylesheet" type="text/css" />
</head>
<body class="register-page">
<style type="text/css">
    .fa:before, .fa-user {
        display: block;
        line-height: 34px;
    }
</style>
<div class="register-box">
    <div class="register-logo">
        <a href="/user/user/login"><b>Dmovie </b>Admin</a>
    </div>

    <div class="register-box-body">
        <p class="login-box-msg">找回密码</p>
        <form>
            <div class="form-group has-feedback">
                <input type="email" class="form-control" placeholder="输入邮箱地址" name="email"/>
                <span class="form-control-feedback fa fa-envelope"></span>
            </div>
            <div class="row">
                <div class="col-xs-8">
                </div>
                <div class="col-xs-4">
                    <button type="button" class="btn btn-primary btn-block btn-flat email">提交</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script src="/static/js/jquery-1.9.1.js"></script>
<script src="/static/js/bootstrap.min.js" type="text/javascript"></script>
<script>
    $(function () {
        $(".email").click(function(){
            var email = $("input[name='email']").val();
            if(!email){
                $("input[name='email']").focus().selected();
                return false;
            }
            $.ajax({
                type:"post",
                url:"/user/user/email",
                data:{"email":email},
                dataType: "json" ,
                success: function(data){
                    console.log(data);
                    if(data["status"] == "success"){
                        alert("登入您的邮箱查看邮件,找回密码");
                    }
                    else {
                        alert(data["query"]);
                    }
                },
                error:function(data, status, e){
                    alert(e);
                }
            });
            return false;
        });
    });
</script>
</body>
</html>